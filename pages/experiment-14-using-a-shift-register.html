<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Experiment 14: Using a Shift Register - HackerSpaceTech</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="http://www.hackerspacetech.com/pages/experiment-14-using-a-shift-register.html">

        <meta name="author" content="Hacker Space Tech" />
        <meta name="description" content="Adapted from Sparkfun Inventor Kit Experiential Guide Introduction Now we are going to step into the world of ICs (integrated circuits). In this circuit, you’ll learn all about using a shift register (also called a serial-to-parallel converter). The shift register will give your RedBoard or Arduino Uno R3 an ..." />

    <meta property="og:site_name" content="HackerSpaceTech" />
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Experiment 14: Using a Shift Register"/>
    <meta property="og:url" content="http://www.hackerspacetech.com/pages/experiment-14-using-a-shift-register.html"/>
    <meta property="og:description" content="Adapted from Sparkfun Inventor Kit Experiential Guide Introduction Now we are going to step into the world of ICs (integrated circuits). In this circuit, you’ll learn all about using a shift register (also called a serial-to-parallel converter). The shift register will give your RedBoard or Arduino Uno R3 an ..." />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://www.hackerspacetech.com/theme/css/bootstrap.united.min.css" type="text/css"/>
    <link href="http://www.hackerspacetech.com/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://www.hackerspacetech.com/theme/css/pygments/solarizeddark.css" rel="stylesheet">
    <link rel="stylesheet" href="http://www.hackerspacetech.com/theme/css/style.css" type="text/css"/>

        <link href="http://www.hackerspacetech.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="HackerSpaceTech ATOM Feed"/>




</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://www.hackerspacetech.com/" class="navbar-brand">
HackerSpaceTech            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="/category/blog.html">Blog</a></li>
                    <li><a href="/pages/meetups.html">Meetups</a></li>
                    <li><a href="/pages/classes.html">Classes</a></li>
                    <li><a href="http://freecourse.hackerspacetech.com">Arduino Crash Course</a></li>
                    <li><a href="/pages/hacker-stars.html">Contributors</a></li>
                    <li><a href="/pages/tutorials.html">Tutorials</a></li>
                    <li><a href="/pages/contact.html">Contact</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<style>
	#banner{
	    background-image:url("http://www.hackerspacetech.com//images/banners/mainbanner3.png");
	}
</style>

<div id="banner">
	<div class="container-fluid">
		<div class="copy">
			<h1>HackerSpaceTech</h1>
		</div>
	</div>
</div><!-- End Banner -->
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-9">
    <section id="content" class="body">
        <h1 class="entry-title">Experiment 14: Using a Shift Register</h1>
        
        <div class="entry-content">
            <h3 style="background-color: white; box-sizing: border-box; color: #555555; font-family: montserrat, 'helvetica neue', helvetica, arial, sans-serif; font-size: 20px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 20px; text-align: center;">
<span style="color: #333333; font-family: &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif; font-size: 14px; line-height: 20px;">Adapted from&nbsp;</span><a href="https://learn.sparkfun.com/tutorials/sik-experiment-guide-for-arduino---v32?_ga=1.62774956.1058471170.1443294570" rel="nofollow" style="color: #7d181e; font-family: 'helvetica neue', helvetica, arial, sans-serif; font-size: 14px; line-height: 20px; text-decoration: none;" target="_blank">Sparkfun Inventor Kit Experiential Guide</a></h3>

<div>
<h3 style="background-color: white; box-sizing: border-box; color: #555555; font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 20px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 20px;">
Introduction</h3>
<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px;">
Now we are going to step into the world of ICs (<a href="https://learn.sparkfun.com/tutorials/integrated-circuits" rel="nofollow" style="background: 0px 0px; box-sizing: border-box; color: #e0311d; text-decoration: none;">integrated circuits</a>). In this circuit, you’ll learn all about using a&nbsp;<a href="https://learn.sparkfun.com/tutorials/shift-registers" rel="nofollow" style="background: 0px 0px; box-sizing: border-box; color: #e0311d; text-decoration: none;">shift register</a>&nbsp;(also called a serial-to-parallel converter). The shift register will give your RedBoard or Arduino Uno R3 an additional eight outputs, using only three pins on your board. For this circuit, you’ll practice by using the shift register to control eight LEDs.</div>
<h4 style="background-color: white; box-sizing: border-box; color: #555555; font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 10px;">
Parts Needed</h4>
<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px;">
You will need the following parts:</div>
<ul style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px; margin-top: 0px;">
<li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: 700;">1x</span>&nbsp;Breadboard</li>
<li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: 700;">1x</span>&nbsp;RedBoard or Arduino Uno</li>
<li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: 700;">8x</span>&nbsp;LEDs</li>
<li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: 700;">8x</span>&nbsp;330Ω Resistors</li>
<li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: 700;">1x</span>&nbsp;Shift Register 8-Bit - 74HC595</li>
<li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: 700;">19x</span>&nbsp;Jumper Wires</li>
</ul>
<div>
<h4 style="background-color: white; box-sizing: border-box; color: #555555; font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 10px;">
Suggested Reading</h4>
<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px;">
Before continuing on with this experiment, we recommend you be familiar with the concepts in the following tutorial:</div>
<ul style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px; margin-top: 0px;">
<li style="box-sizing: border-box;"><a href="https://learn.sparkfun.com/tutorials/shift-registers" rel="nofollow" style="background: 0px 0px; box-sizing: border-box; color: #e0311d; text-decoration: none;" target="_blank">Shift Registers</a></li>
<li style="box-sizing: border-box;"><a href="https://learn.sparkfun.com/tutorials/integrated-circuits" rel="nofollow" style="background: 0px 0px; box-sizing: border-box; color: #e0311d; text-decoration: none;" target="_blank">Integrated Circuits</a></li>
</ul>
<h3 style="background-color: white; box-sizing: border-box; color: #555555; font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 20px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 20px;">
Hardware Hookup</h3>
<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px;">
Ready to start hooking everything up? Check out the Fritzing diagram below, to see how everything is connected.</div>
<table class="table table-bordered" style="background-color: white; border-collapse: collapse; border-spacing: 0px; border: 1px solid rgb(221, 221, 221); box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 20px; max-width: 100%; width: 640px;"><tbody style="box-sizing: border-box;">
<tr class="warning" style="box-sizing: border-box;"><td align="center" class="form-control-feedback" style="background-color: #fcf8e3; border: 1px solid rgb(221, 221, 221); box-sizing: border-box; line-height: 1.42857; padding: 8px; vertical-align: top;">Polarized Components&nbsp;<span class="glyphicon glyphicon-warning-sign" style="box-sizing: border-box; display: inline-block; font-family: &quot;glyphicons halflings&quot;; line-height: 1; position: relative; top: 1px;"></span></td><td align="left" style="background-color: #fcf8e3; border: 1px solid rgb(221, 221, 221); box-sizing: border-box; line-height: 1.42857; padding: 8px; vertical-align: top;">Pay special attention to the component’s markings indicating how to place it on the breadboard. Polarized components can only be connected to a circuit in one direction.</td></tr>
</tbody></table>
<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px;">
For the shift register, align notch on top, in-between “e1” and “f1” on the breadboard. The notch indicates where pin 1 is.</div>
<h4 style="background-color: white; box-sizing: border-box; color: #555555; font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 10px;">
Fritzing Diagram for RedBoard</h4>
<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px; text-align: center;">
<a href="https://cdn.sparkfun.com/assets/learn_tutorials/3/1/0/sik_redboard_circuit_14.png" style="background: 0px 0px; box-sizing: border-box; color: #e0311d; text-decoration: none;"><img alt="RedBoard Circuit Hook up image" src="https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/3/1/0/sik_redboard_circuit_14.png" style="border: 0px; box-sizing: border-box; height: auto; max-width: 100%; vertical-align: middle;" /></a></div>
<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px; text-align: center;">
<em style="box-sizing: border-box;">Having a hard time seeing the circuit? Click on the Fritzing diagram to see a bigger image.</em><br />
<em style="box-sizing: border-box;"><br /></em>
<br />
<div style="text-align: left;">
<em style="box-sizing: border-box;"><span style="color: #555555; font-family: &quot;montserrat&quot; , &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif; font-size: 20px; font-style: normal; line-height: 22px;">Run the Sketch</span></em></div>
<em style="box-sizing: border-box;"></em></div>
</div>
</div>

<div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">SparkFun Inventor&#39;s Kit</span>
<span class="cm">Example sketch 14</span>

<span class="cm">SHIFT REGISTER</span>

<span class="cm">  Use a shift register to turn three pins into eight (or more!)</span>
<span class="cm">  outputs</span>

<span class="cm">  An integrated circuit (&quot;IC&quot;), or &quot;chip&quot;, is a self-contained</span>
<span class="cm">  circuit built into a small plastic package. (If you look closely</span>
<span class="cm">  at your Arduino board you&#39;ll see a number of ICs.) There are</span>
<span class="cm">  thousands of different types of ICs available that you can use</span>
<span class="cm">  to perform many useful functions.</span>

<span class="cm">  The 74HC595 shift register in your kit is an IC that has eight</span>
<span class="cm">  digital outputs. To use these outputs, we&#39;ll use a new interface</span>
<span class="cm">  called SPI (Serial Peripheral Interface). It&#39;s like the TX and </span>
<span class="cm">  RX you&#39;re used to, but has an additional &quot;clock&quot; line that </span>
<span class="cm">  controls the speed of the data transfer. Many parts use SPI</span>
<span class="cm">  for communications, so the Arduino offers simple commands called</span>
<span class="cm">  shiftIn() and shiftOut() to access these parts.</span>

<span class="cm">  This IC lets you use three digital pins on your Arduino to</span>
<span class="cm">  control eight digital outputs on the chip. And if you need </span>
<span class="cm">  even more outputs, you can daisy-chain multiple shift registers</span>
<span class="cm">  together, allowing an almost unlimited number of outputs from </span>
<span class="cm">  the same three Arduino pins! See the shift register datasheet</span>
<span class="cm">  for details:</span>

<span class="cm">  http://www.sparkfun.com/datasheets/IC/SN74HC595.pdf</span>

<span class="cm">Hardware connections:</span>

<span class="cm">  Shift register:</span>

<span class="cm">    Plug in the chip so it bridges the center &quot;canyon&quot;</span>
<span class="cm">    on the breadboard.</span>

<span class="cm">    The shift register has 16 pins. They are numbered</span>
<span class="cm">    counterclockwise starting at the pin 1 mark (notch</span>
<span class="cm">    in the end of the chip). See the datasheet above</span>
<span class="cm">    for a diagram.</span>

<span class="cm">    74HC595 pin     LED pin     Arduino pin</span>

<span class="cm">    1  (QB)     LED 2 +</span>
<span class="cm">    2  (QC)     LED 3 +</span>
<span class="cm">    3  (QD)     LED 4 +</span>
<span class="cm">    4  (QE)     LED 5 +</span>
<span class="cm">    5  (QF)     LED 6 +</span>
<span class="cm">    6  (QG)     LED 7 +</span>
<span class="cm">    7  (QH)     LED 8 +</span>
<span class="cm">    8  (GND)                GND</span>

<span class="cm">    9  (QH*)</span>
<span class="cm">    10 (SRCLR*)             5V</span>
<span class="cm">    11 (SRCLK)              Digital 3</span>
<span class="cm">    12 (RCLK)               Digital 4</span>
<span class="cm">    13 (OE*)                GND</span>
<span class="cm">    14 (SER)                Digital 2</span>
<span class="cm">    15 (QA)     LED 1 +</span>
<span class="cm">    16 (VCC)                5V</span>

<span class="cm">  LEDs:</span>

<span class="cm">    After making the above connections to the positive (longer)</span>
<span class="cm">    legs of the LEDs, connect the negative side (short lead) of</span>
<span class="cm">    each LED to a 330 Ohm resistor, and connect the other side</span>
<span class="cm">    of each resistor to GND.</span>

<span class="cm">This sketch was written by SparkFun Electronics,</span>
<span class="cm">with lots of help from the Arduino community.</span>
<span class="cm">This code is completely free for any use.</span>
<span class="cm">Visit http://learn.sparkfun.com/products/2 for SIK information.</span>
<span class="cm">Visit http://www.arduino.cc to learn about the Arduino.</span>

<span class="cm">Version 2.0 6/2012 MDG</span>
<span class="cm">*/</span><span class="w"></span>


<span class="o">//</span><span class="w"> </span>Pin<span class="w"> </span><span class="nl">definitions</span><span class="o">:</span><span class="w"></span>
<span class="o">//</span><span class="w"> </span>The<span class="w"> </span><span class="m">74</span>HC595<span class="w"> </span>uses<span class="w"> </span>a<span class="w"> </span>type<span class="w"> </span>of<span class="w"> </span>serial<span class="w"> </span>connection<span class="w"> </span>called<span class="w"> </span>SPI<span class="w"></span>
<span class="o">//</span><span class="w"> </span><span class="o">(</span>Serial<span class="w"> </span>Peripheral<span class="w"> </span>Interface<span class="o">)</span><span class="w"> </span>that<span class="w"> </span>requires<span class="w"> </span>three<span class="w"> </span><span class="nl">pins</span><span class="o">:</span><span class="w"></span>

int<span class="w"> </span>datapin<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="err">;</span><span class="w"> </span>
int<span class="w"> </span>clockpin<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="err">;</span><span class="w"></span>
int<span class="w"> </span>latchpin<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="err">;</span><span class="w"></span>

<span class="o">//</span><span class="w"> </span>We<span class="s">&#39;ll also declare a global variable for the data we&#39;</span>re<span class="w"></span>
<span class="o">//</span><span class="w"> </span>sending<span class="w"> </span><span class="kr">to</span><span class="w"> </span>the<span class="w"> </span>shift<span class="w"> </span><span class="nl">register</span><span class="o">:</span><span class="w"></span>

byte<span class="w"> </span>data<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="err">;</span><span class="w"></span>


void<span class="w"> </span>setup<span class="o">()</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>Set<span class="w"> </span>the<span class="w"> </span>three<span class="w"> </span>SPI<span class="w"> </span>pins<span class="w"> </span><span class="kr">to</span><span class="w"> </span>be<span class="w"> </span><span class="nl">outputs</span><span class="o">:</span><span class="w"></span>

<span class="w">  </span>pinMode<span class="o">(</span>datapin<span class="o">,</span><span class="w"> </span>OUTPUT<span class="o">)</span><span class="err">;</span><span class="w"></span>
<span class="w">  </span>pinMode<span class="o">(</span>clockpin<span class="o">,</span><span class="w"> </span>OUTPUT<span class="o">)</span><span class="err">;</span><span class="w">  </span>
<span class="w">  </span>pinMode<span class="o">(</span>latchpin<span class="o">,</span><span class="w"> </span>OUTPUT<span class="o">)</span><span class="err">;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>


void<span class="w"> </span>loop<span class="o">()</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>We<span class="s">&#39;re going to use the same functions we played with back</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>in<span class="w"> </span>circuit<span class="w"> </span><span class="m">04</span><span class="o">,</span><span class="w"> </span><span class="s">&quot;Multiple LEDs&quot;</span><span class="o">,</span><span class="w"> </span>we<span class="s">&#39;ve just replaced</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>digitalWrite<span class="o">()</span><span class="w"> </span>with<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>function<span class="w"> </span>called<span class="w"> </span>shiftWrite<span class="o">()</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="o">(</span>see<span class="w"> </span>below<span class="o">).</span><span class="w"> </span>We<span class="w"> </span>also<span class="w"> </span>have<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>function<span class="w"> </span>that<span class="w"> </span>demonstrates<span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>binary<span class="w"> </span>counting<span class="o">.</span><span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="kr">To</span><span class="w"> </span>try<span class="w"> </span>the<span class="w"> </span>different<span class="w"> </span>functions<span class="w"> </span>below<span class="o">,</span><span class="w"> </span>uncomment<span class="w"> </span>the<span class="w"> </span>one<span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span><span class="kr">to</span><span class="w"> </span>run<span class="o">,</span><span class="w"> </span>and<span class="w"> </span>comment<span class="w"> </span>out<span class="w"> </span>the<span class="w"> </span>remaining<span class="w"> </span>ones<span class="w"> </span><span class="kr">to</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>disable<span class="w"> </span>them<span class="w"> </span>from<span class="w"> </span>running<span class="o">.</span><span class="w"></span>

<span class="w">  </span>oneAfterAnother<span class="o">()</span><span class="err">;</span><span class="w">      </span><span class="o">//</span><span class="w"> </span>All<span class="w"> </span><span class="kr">on</span><span class="o">,</span><span class="w"> </span>all<span class="w"> </span><span class="kr">off</span><span class="w"></span>

<span class="w">  </span><span class="o">//</span>oneOnAtATime<span class="o">()</span><span class="err">;</span><span class="w">       </span><span class="o">//</span><span class="w"> </span>Scroll<span class="w"> </span>down<span class="w"> </span>the<span class="w"> </span>line<span class="w"></span>

<span class="w">  </span><span class="o">//</span>pingPong<span class="o">()</span><span class="err">;</span><span class="w">           </span><span class="o">//</span><span class="w"> </span>Like<span class="w"> </span>above<span class="o">,</span><span class="w"> </span>but<span class="w"> </span>back<span class="w"> </span>and<span class="w"> </span>forth<span class="w"></span>

<span class="w">  </span><span class="o">//</span>randomLED<span class="o">()</span><span class="err">;</span><span class="w">          </span><span class="o">//</span><span class="w"> </span>Blink<span class="w"> </span>random<span class="w"> </span>LEDs<span class="w"></span>

<span class="w">  </span><span class="o">//</span>marquee<span class="o">()</span><span class="err">;</span><span class="w"></span>

<span class="w">  </span><span class="o">//</span>binaryCount<span class="o">()</span><span class="err">;</span><span class="w">        </span><span class="o">//</span><span class="w"> </span>Bit<span class="w"> </span>patterns<span class="w"> </span>from<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="m">255</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>


void<span class="w"> </span>shiftWrite<span class="o">(</span>int<span class="w"> </span>desiredPin<span class="o">,</span><span class="w"> </span>boolean<span class="w"> </span>desiredState<span class="o">)</span><span class="w"></span>

<span class="o">//</span><span class="w"> </span>This<span class="w"> </span>function<span class="w"> </span>lets<span class="w"> </span>you<span class="w"> </span>make<span class="w"> </span>the<span class="w"> </span>shift<span class="w"> </span>register<span class="w"> </span>outputs<span class="w"></span>
<span class="o">//</span><span class="w"> </span>HIGH<span class="w"> </span>or<span class="w"> </span>LOW<span class="w"> </span>in<span class="w"> </span>exactly<span class="w"> </span>the<span class="w"> </span>same<span class="w"> </span>way<span class="w"> </span>that<span class="w"> </span>you<span class="w"> </span>use<span class="w"> </span>digitalWrite<span class="o">().</span><span class="w"></span>

<span class="o">//</span><span class="w"> </span>Like<span class="w"> </span>digitalWrite<span class="o">(),</span><span class="w"> </span>this<span class="w"> </span>function<span class="w"> </span>takes<span class="w"> </span>two<span class="w"> </span><span class="nl">parameters</span><span class="o">:</span><span class="w"></span>

<span class="o">//</span><span class="w">    </span><span class="s">&quot;desiredPin&quot;</span><span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>shift<span class="w"> </span>register<span class="w"> </span>output<span class="w"> </span>pin<span class="w"></span>
<span class="o">//</span><span class="w">    </span>you<span class="w"> </span>want<span class="w"> </span><span class="kr">to</span><span class="w"> </span>affect<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="o">-</span><span class="m">7</span><span class="o">)</span><span class="w"></span>

<span class="o">//</span><span class="w">    </span><span class="s">&quot;desiredState&quot;</span><span class="w"> </span>is<span class="w"> </span>whether<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>that<span class="w"> </span>output<span class="w"></span>
<span class="o">//</span><span class="w">    </span><span class="kr">to</span><span class="w"> </span>be<span class="w"> </span>HIGH<span class="w"> </span>or<span class="w"> </span>LOW<span class="w"></span>

<span class="o">//</span><span class="w"> </span>Inside<span class="w"> </span>the<span class="w"> </span>Arduino<span class="o">,</span><span class="w"> </span>numbers<span class="w"> </span>are<span class="w"> </span>stored<span class="w"> </span>as<span class="w"> </span>arrays<span class="w"> </span>of<span class="w"> </span><span class="s">&quot;bits&quot;</span><span class="o">,</span><span class="w"></span>
<span class="o">//</span><span class="w"> </span>each<span class="w"> </span>of<span class="w"> </span>which<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>single<span class="w"> </span><span class="m">1</span><span class="w"> </span>or<span class="w"> </span><span class="m">0</span><span class="w"> </span>value<span class="o">.</span><span class="w"> </span>Because<span class="w"> </span>a<span class="w"> </span><span class="s">&quot;byte&quot;</span><span class="w"> </span>type<span class="w"></span>
<span class="o">//</span><span class="w"> </span>is<span class="w"> </span>also<span class="w"> </span>eight<span class="w"> </span>bits<span class="o">,</span><span class="w"> </span>we<span class="s">&#39;ll use a byte (which we named &quot;data&quot;</span>
<span class="o">//</span><span class="w"> </span>at<span class="w"> </span>the<span class="w"> </span>top<span class="w"> </span>of<span class="w"> </span>this<span class="w"> </span>sketch<span class="o">)</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>send<span class="w"> </span>data<span class="w"> </span><span class="kr">to</span><span class="w"> </span>the<span class="w"> </span>shift<span class="w"> </span>register<span class="o">.</span><span class="w"></span>
<span class="o">//</span><span class="w"> </span><span class="kr">If</span><span class="w"> </span>a<span class="w"> </span>bit<span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>byte<span class="w"> </span>is<span class="w"> </span><span class="s">&quot;1&quot;</span><span class="o">,</span><span class="w"> </span>the<span class="w"> </span>output<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>HIGH<span class="o">.</span><span class="w"> </span><span class="kr">If</span><span class="w"> </span>the<span class="w"> </span>bit<span class="w"></span>
<span class="o">//</span><span class="w"> </span>is<span class="w"> </span><span class="s">&quot;0&quot;</span><span class="o">,</span><span class="w"> </span>the<span class="w"> </span>output<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>LOW<span class="o">.</span><span class="w"></span>

<span class="o">//</span><span class="w"> </span><span class="kr">To</span><span class="w"> </span>turn<span class="w"> </span>the<span class="w"> </span>individual<span class="w"> </span>bits<span class="w"> </span>in<span class="w"> </span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="kr">on</span><span class="w"> </span>and<span class="w"> </span><span class="kr">off</span><span class="o">,</span><span class="w"> </span>we<span class="s">&#39;ll use</span>
<span class="o">//</span><span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>Arduino<span class="w"> </span>commands<span class="w"> </span>called<span class="w"> </span>bitWrite<span class="o">(),</span><span class="w"> </span>which<span class="w"> </span>can<span class="w"> </span>make<span class="w"></span>
<span class="o">//</span><span class="w"> </span>individual<span class="w"> </span>bits<span class="w"> </span>in<span class="w"> </span>a<span class="w"> </span>number<span class="w"> </span><span class="m">1</span><span class="w"> </span>or<span class="w"> </span><span class="m">0</span><span class="o">.</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>First<span class="w"> </span>we<span class="s">&#39;ll alter the global variable &quot;data&quot;, changing the</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>desired<span class="w"> </span>bit<span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>or<span class="w"> </span><span class="m">0</span><span class="err">:</span><span class="w"></span>

<span class="w">  </span>bitWrite<span class="o">(</span>data<span class="o">,</span>desiredPin<span class="o">,</span>desiredState<span class="o">)</span><span class="err">;</span><span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>Now<span class="w"> </span>we<span class="s">&#39;ll actually send that data to the shift register.</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>The<span class="w"> </span>shiftOut<span class="o">()</span><span class="w"> </span>function<span class="w"> </span>does<span class="w"> </span>all<span class="w"> </span>the<span class="w"> </span>hard<span class="w"> </span>work<span class="w"> </span>of<span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>manipulating<span class="w"> </span>the<span class="w"> </span>data<span class="w"> </span>and<span class="w"> </span>clock<span class="w"> </span>pins<span class="w"> </span><span class="kr">to</span><span class="w"> </span>move<span class="w"> </span>the<span class="w"> </span>data<span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>into<span class="w"> </span>the<span class="w"> </span>shift<span class="w"> </span><span class="nl">register</span><span class="o">:</span><span class="w"></span>

<span class="w">  </span>shiftOut<span class="o">(</span>datapin<span class="o">,</span><span class="w"> </span>clockpin<span class="o">,</span><span class="w"> </span>MSBFIRST<span class="o">,</span><span class="w"> </span>data<span class="o">)</span><span class="err">;</span><span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>Once<span class="w"> </span>the<span class="w"> </span>data<span class="w"> </span>is<span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>shift<span class="w"> </span>register<span class="o">,</span><span class="w"> </span>we<span class="w"> </span>still<span class="w"> </span>need<span class="w"> </span><span class="kr">to</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>make<span class="w"> </span>it<span class="w"> </span>appear<span class="w"> </span>at<span class="w"> </span>the<span class="w"> </span>outputs<span class="o">.</span><span class="w"> </span>We<span class="s">&#39;ll toggle the state of</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>the<span class="w"> </span>latchPin<span class="o">,</span><span class="w"> </span>which<span class="w"> </span>will<span class="w"> </span><span class="kr">signal</span><span class="w"> </span>the<span class="w"> </span>shift<span class="w"> </span>register<span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="s">&quot;latch&quot;</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>the<span class="w"> </span>data<span class="w"> </span><span class="kr">to</span><span class="w"> </span>the<span class="w"> </span>outputs<span class="o">.</span><span class="w"> </span><span class="o">(</span>Latch<span class="w"> </span>activates<span class="w"> </span><span class="kr">on</span><span class="w"> </span>the<span class="w"> </span>high<span class="o">-</span><span class="kr">to</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="o">-</span>low<span class="w"> </span>transition<span class="o">).</span><span class="w"></span>

<span class="w">  </span>digitalWrite<span class="o">(</span>latchpin<span class="o">,</span><span class="w"> </span>HIGH<span class="o">)</span><span class="err">;</span><span class="w"></span>
<span class="w">  </span>digitalWrite<span class="o">(</span>latchpin<span class="o">,</span><span class="w"> </span>LOW<span class="o">)</span><span class="err">;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>


<span class="cm">/*</span>
<span class="cm">oneAfterAnother()</span>

<span class="cm">This function will light one LED, delay for delayTime, then light</span>
<span class="cm">the next LED, and repeat until all the LEDs are on. It will then</span>
<span class="cm">turn them off in the reverse order.</span>
<span class="cm">*/</span><span class="w"></span>

void<span class="w"> </span>oneAfterAnother<span class="o">()</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="w">  </span>int<span class="w"> </span>index<span class="err">;</span><span class="w"></span>
<span class="w">  </span>int<span class="w"> </span>delayTime<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="err">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nb">Time</span><span class="w"> </span><span class="o">(</span>milliseconds<span class="o">)</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>pause<span class="w"> </span>between<span class="w"> </span>LEDs<span class="w"></span>
<span class="w">                       </span><span class="o">//</span><span class="w"> </span>Make<span class="w"> </span>this<span class="w"> </span>smaller<span class="w"> </span><span class="kr">for</span><span class="w"> </span>faster<span class="w"> </span>switching<span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>Turn<span class="w"> </span>all<span class="w"> </span>the<span class="w"> </span>LEDs<span class="w"> </span><span class="nl">on</span><span class="o">:</span><span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>This<span class="w"> </span><span class="kr">for</span><span class="o">()</span><span class="w"> </span>loop<span class="w"> </span>will<span class="w"> </span>step<span class="w"> </span>index<span class="w"> </span>from<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="m">7</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="o">(</span>putting<span class="w"> </span><span class="s">&quot;++&quot;</span><span class="w"> </span>after<span class="w"> </span>a<span class="w"> </span>variable<span class="w"> </span>means<span class="w"> </span>add<span class="w"> </span>one<span class="w"> </span><span class="kr">to</span><span class="w"> </span>it<span class="o">)</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>and<span class="w"> </span>will<span class="w"> </span><span class="kr">then</span><span class="w"> </span>use<span class="w"> </span>digitalWrite<span class="o">()</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>turn<span class="w"> </span>that<span class="w"> </span>LED<span class="w"> </span><span class="kr">on</span><span class="o">.</span><span class="w"></span>

<span class="w">  </span><span class="kr">for</span><span class="o">(</span>index<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="err">;</span><span class="w"> </span>index<span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">7</span><span class="err">;</span><span class="w"> </span>index<span class="o">++)</span><span class="w"></span>
<span class="w">  </span><span class="err">{</span><span class="w"></span>
<span class="w">    </span>shiftWrite<span class="o">(</span>index<span class="o">,</span><span class="w"> </span>HIGH<span class="o">)</span><span class="err">;</span><span class="w"></span>
<span class="w">    </span>delay<span class="o">(</span>delayTime<span class="o">)</span><span class="err">;</span><span class="w">                </span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>Turn<span class="w"> </span>all<span class="w"> </span>the<span class="w"> </span>LEDs<span class="w"> </span><span class="nl">off</span><span class="o">:</span><span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>This<span class="w"> </span><span class="kr">for</span><span class="o">()</span><span class="w"> </span>loop<span class="w"> </span>will<span class="w"> </span>step<span class="w"> </span>index<span class="w"> </span>from<span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="o">(</span>putting<span class="w"> </span><span class="s">&quot;--&quot;</span><span class="w"> </span>after<span class="w"> </span>a<span class="w"> </span>variable<span class="w"> </span>means<span class="w"> </span>subtract<span class="w"> </span>one<span class="w"> </span>from<span class="w"> </span>it<span class="o">)</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>and<span class="w"> </span>will<span class="w"> </span><span class="kr">then</span><span class="w"> </span>use<span class="w"> </span>digitalWrite<span class="o">()</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>turn<span class="w"> </span>that<span class="w"> </span>LED<span class="w"> </span><span class="kr">off</span><span class="o">.</span><span class="w"></span>

<span class="w">  </span><span class="kr">for</span><span class="o">(</span>index<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">7</span><span class="err">;</span><span class="w"> </span>index<span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="err">;</span><span class="w"> </span>index<span class="o">--)</span><span class="w"></span>
<span class="w">  </span><span class="err">{</span><span class="w"></span>
<span class="w">    </span>shiftWrite<span class="o">(</span>index<span class="o">,</span><span class="w"> </span>LOW<span class="o">)</span><span class="err">;</span><span class="w"></span>
<span class="w">    </span>delay<span class="o">(</span>delayTime<span class="o">)</span><span class="err">;</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>


<span class="cm">/*</span>
<span class="cm">oneOnAtATime()</span>

<span class="cm">This function will step through the LEDs, lighting one at at time.</span>
<span class="cm">*/</span><span class="w"></span>

void<span class="w"> </span>oneOnAtATime<span class="o">()</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="w">  </span>int<span class="w"> </span>index<span class="err">;</span><span class="w"></span>
<span class="w">  </span>int<span class="w"> </span>delayTime<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="err">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nb">Time</span><span class="w"> </span><span class="o">(</span>milliseconds<span class="o">)</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>pause<span class="w"> </span>between<span class="w"> </span>LEDs<span class="w"></span>
<span class="w">                       </span><span class="o">//</span><span class="w"> </span>Make<span class="w"> </span>this<span class="w"> </span>smaller<span class="w"> </span><span class="kr">for</span><span class="w"> </span>faster<span class="w"> </span>switching<span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>step<span class="w"> </span>through<span class="w"> </span>the<span class="w"> </span>LEDs<span class="o">,</span><span class="w"> </span>from<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="m">7</span><span class="w"></span>

<span class="w">  </span><span class="kr">for</span><span class="o">(</span>index<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="err">;</span><span class="w"> </span>index<span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">7</span><span class="err">;</span><span class="w"> </span>index<span class="o">++)</span><span class="w"></span>
<span class="w">  </span><span class="err">{</span><span class="w"></span>
<span class="w">    </span>shiftWrite<span class="o">(</span>index<span class="o">,</span><span class="w"> </span>HIGH<span class="o">)</span><span class="err">;</span><span class="w">    </span><span class="o">//</span><span class="w"> </span>turn<span class="w"> </span>LED<span class="w"> </span><span class="kr">on</span><span class="w"></span>
<span class="w">    </span>delay<span class="o">(</span>delayTime<span class="o">)</span><span class="err">;</span><span class="w">       </span><span class="o">//</span><span class="w"> </span>pause<span class="w"> </span><span class="kr">to</span><span class="w"> </span>slow<span class="w"> </span>down<span class="w"> </span>the<span class="w"> </span>sequence<span class="w"></span>
<span class="w">    </span>shiftWrite<span class="o">(</span>index<span class="o">,</span><span class="w"> </span>LOW<span class="o">)</span><span class="err">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span>turn<span class="w"> </span>LED<span class="w"> </span><span class="kr">off</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>


<span class="cm">/*</span>
<span class="cm">pingPong()</span>

<span class="cm">This function will step through the LEDs, lighting one at at time,</span>
<span class="cm">in both directions.</span>
<span class="cm">*/</span><span class="w"></span>

void<span class="w"> </span>pingPong<span class="o">()</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="w">  </span>int<span class="w"> </span>index<span class="err">;</span><span class="w"></span>
<span class="w">  </span>int<span class="w"> </span>delayTime<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="err">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="o">(</span>milliseconds<span class="o">)</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>pause<span class="w"> </span>between<span class="w"> </span>LEDs<span class="w"></span>
<span class="w">                       </span><span class="o">//</span><span class="w"> </span>make<span class="w"> </span>this<span class="w"> </span>smaller<span class="w"> </span><span class="kr">for</span><span class="w"> </span>faster<span class="w"> </span>switching<span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>step<span class="w"> </span>through<span class="w"> </span>the<span class="w"> </span>LEDs<span class="o">,</span><span class="w"> </span>from<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="m">7</span><span class="w"></span>

<span class="w">  </span><span class="kr">for</span><span class="o">(</span>index<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="err">;</span><span class="w"> </span>index<span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">7</span><span class="err">;</span><span class="w"> </span>index<span class="o">++)</span><span class="w"></span>
<span class="w">  </span><span class="err">{</span><span class="w"></span>
<span class="w">    </span>shiftWrite<span class="o">(</span>index<span class="o">,</span><span class="w"> </span>HIGH<span class="o">)</span><span class="err">;</span><span class="w">    </span><span class="o">//</span><span class="w"> </span>turn<span class="w"> </span>LED<span class="w"> </span><span class="kr">on</span><span class="w"></span>
<span class="w">    </span>delay<span class="o">(</span>delayTime<span class="o">)</span><span class="err">;</span><span class="w">       </span><span class="o">//</span><span class="w"> </span>pause<span class="w"> </span><span class="kr">to</span><span class="w"> </span>slow<span class="w"> </span>down<span class="w"> </span>the<span class="w"> </span>sequence<span class="w"></span>
<span class="w">    </span>shiftWrite<span class="o">(</span>index<span class="o">,</span><span class="w"> </span>LOW<span class="o">)</span><span class="err">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span>turn<span class="w"> </span>LED<span class="w"> </span><span class="kr">off</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>step<span class="w"> </span>through<span class="w"> </span>the<span class="w"> </span>LEDs<span class="o">,</span><span class="w"> </span>from<span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="m">0</span><span class="w"></span>

<span class="w">  </span><span class="kr">for</span><span class="o">(</span>index<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">7</span><span class="err">;</span><span class="w"> </span>index<span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="err">;</span><span class="w"> </span>index<span class="o">--)</span><span class="w"></span>
<span class="w">  </span><span class="err">{</span><span class="w"></span>
<span class="w">    </span>shiftWrite<span class="o">(</span>index<span class="o">,</span><span class="w"> </span>HIGH<span class="o">)</span><span class="err">;</span><span class="w">    </span><span class="o">//</span><span class="w"> </span>turn<span class="w"> </span>LED<span class="w"> </span><span class="kr">on</span><span class="w"></span>
<span class="w">    </span>delay<span class="o">(</span>delayTime<span class="o">)</span><span class="err">;</span><span class="w">       </span><span class="o">//</span><span class="w"> </span>pause<span class="w"> </span><span class="kr">to</span><span class="w"> </span>slow<span class="w"> </span>down<span class="w"> </span>the<span class="w"> </span>sequence<span class="w"></span>
<span class="w">    </span>shiftWrite<span class="o">(</span>index<span class="o">,</span><span class="w"> </span>LOW<span class="o">)</span><span class="err">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span>turn<span class="w"> </span>LED<span class="w"> </span><span class="kr">off</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>


<span class="cm">/*</span>
<span class="cm">randomLED()</span>

<span class="cm">This function will turn on random LEDs. Can you modify it so it</span>
<span class="cm">also lights them for random times?</span>
<span class="cm">*/</span><span class="w"></span>

void<span class="w"> </span>randomLED<span class="o">()</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="w">  </span>int<span class="w"> </span>index<span class="err">;</span><span class="w"></span>
<span class="w">  </span>int<span class="w"> </span>delayTime<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="err">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="o">(</span>milliseconds<span class="o">)</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>pause<span class="w"> </span>between<span class="w"> </span>LEDs<span class="w"></span>
<span class="w">                       </span><span class="o">//</span><span class="w"> </span>make<span class="w"> </span>this<span class="w"> </span>smaller<span class="w"> </span><span class="kr">for</span><span class="w"> </span>faster<span class="w"> </span>switching<span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>The<span class="w"> </span><span class="nb">random</span><span class="o">()</span><span class="w"> </span>function<span class="w"> </span>will<span class="w"> </span><span class="kr">return</span><span class="w"> </span>a<span class="w"> </span>semi<span class="o">-</span>random<span class="w"> </span>number<span class="w"> </span>each<span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>time<span class="w"> </span>it<span class="w"> </span>is<span class="w"> </span>called<span class="o">.</span><span class="w"> </span>See<span class="w"> </span><span class="nl">http</span><span class="o">://</span>arduino<span class="o">.</span>cc<span class="o">/</span>en<span class="o">/</span>Reference<span class="o">/</span>Random<span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span>tips<span class="w"> </span><span class="kr">on</span><span class="w"> </span>how<span class="w"> </span><span class="kr">to</span><span class="w"> </span>make<span class="w"> </span><span class="nb">random</span><span class="o">()</span><span class="w"> </span>more<span class="w"> </span>random<span class="o">.</span><span class="w"></span>

<span class="w">  </span>index<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">random</span><span class="o">(</span><span class="m">8</span><span class="o">)</span><span class="err">;</span><span class="w">    </span><span class="o">//</span><span class="w"> </span>pick<span class="w"> </span>a<span class="w"> </span>random<span class="w"> </span>number<span class="w"> </span>between<span class="w"> </span><span class="m">0</span><span class="w"> </span>and<span class="w"> </span><span class="m">7</span><span class="w"></span>

<span class="w">  </span>shiftWrite<span class="o">(</span>index<span class="o">,</span><span class="w"> </span>HIGH<span class="o">)</span><span class="err">;</span><span class="w">  </span><span class="o">//</span><span class="w"> </span>turn<span class="w"> </span>LED<span class="w"> </span><span class="kr">on</span><span class="w"></span>
<span class="w">  </span>delay<span class="o">(</span>delayTime<span class="o">)</span><span class="err">;</span><span class="w">     </span><span class="o">//</span><span class="w"> </span>pause<span class="w"> </span><span class="kr">to</span><span class="w"> </span>slow<span class="w"> </span>down<span class="w"> </span>the<span class="w"> </span>sequence<span class="w"></span>
<span class="w">  </span>shiftWrite<span class="o">(</span>index<span class="o">,</span><span class="w"> </span>LOW<span class="o">)</span><span class="err">;</span><span class="w">   </span><span class="o">//</span><span class="w"> </span>turn<span class="w"> </span>LED<span class="w"> </span><span class="kr">off</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>


<span class="cm">/*</span>
<span class="cm">marquee()</span>

<span class="cm">This function will mimic &quot;chase lights&quot; like those around signs.</span>
<span class="cm">*/</span><span class="w"></span>

void<span class="w"> </span>marquee<span class="o">()</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="w">  </span>int<span class="w"> </span>index<span class="err">;</span><span class="w"></span>
<span class="w">  </span>int<span class="w"> </span>delayTime<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">200</span><span class="err">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nb">Time</span><span class="w"> </span><span class="o">(</span>milliseconds<span class="o">)</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>pause<span class="w"> </span>between<span class="w"> </span>LEDs<span class="w"></span>
<span class="w">                       </span><span class="o">//</span><span class="w"> </span>Make<span class="w"> </span>this<span class="w"> </span>smaller<span class="w"> </span><span class="kr">for</span><span class="w"> </span>faster<span class="w"> </span>switching<span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>Step<span class="w"> </span>through<span class="w"> </span>the<span class="w"> </span>first<span class="w"> </span>four<span class="w"> </span>LEDs<span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="o">(</span>We<span class="s">&#39;ll light up one in the lower 4 and one in the upper 4)</span>

<span class="w">  </span><span class="kr">for</span><span class="o">(</span>index<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="err">;</span><span class="w"> </span>index<span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">3</span><span class="err">;</span><span class="w"> </span>index<span class="o">++)</span><span class="w"></span>
<span class="w">  </span><span class="err">{</span><span class="w"></span>
<span class="w">    </span>shiftWrite<span class="o">(</span>index<span class="o">,</span><span class="w"> </span>HIGH<span class="o">)</span><span class="err">;</span><span class="w">    </span><span class="o">//</span><span class="w"> </span>Turn<span class="w"> </span>a<span class="w"> </span>LED<span class="w"> </span><span class="kr">on</span><span class="w"></span>
<span class="w">    </span>shiftWrite<span class="o">(</span>index<span class="o">+</span><span class="m">4</span><span class="o">,</span><span class="w"> </span>HIGH<span class="o">)</span><span class="err">;</span><span class="w">  </span><span class="o">//</span><span class="w"> </span>Skip<span class="w"> </span>four<span class="o">,</span><span class="w"> </span>and<span class="w"> </span>turn<span class="w"> </span>that<span class="w"> </span>LED<span class="w"> </span><span class="kr">on</span><span class="w"></span>
<span class="w">    </span>delay<span class="o">(</span>delayTime<span class="o">)</span><span class="err">;</span><span class="w">       </span><span class="o">//</span><span class="w"> </span>Pause<span class="w"> </span><span class="kr">to</span><span class="w"> </span>slow<span class="w"> </span>down<span class="w"> </span>the<span class="w"> </span>sequence<span class="w"></span>
<span class="w">    </span>shiftWrite<span class="o">(</span>index<span class="o">,</span><span class="w"> </span>LOW<span class="o">)</span><span class="err">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span>Turn<span class="w"> </span>both<span class="w"> </span>LEDs<span class="w"> </span><span class="kr">off</span><span class="w"></span>
<span class="w">    </span>shiftWrite<span class="o">(</span>index<span class="o">+</span><span class="m">4</span><span class="o">,</span><span class="w"> </span>LOW<span class="o">)</span><span class="err">;</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>


<span class="cm">/*</span>
<span class="cm">binaryCount()</span>

<span class="cm">Numbers are stored internally in the Arduino as arrays of &quot;bits&quot;,</span>
<span class="cm">each of which is a 1 or 0. Just like the base-10 numbers we use</span>
<span class="cm">every day, The position of the bit affects the magnitude of its </span>
<span class="cm">contribution to the total number:</span>

<span class="cm">Bit position   Contribution</span>
<span class="cm">0              1</span>
<span class="cm">1              2</span>
<span class="cm">2              4</span>
<span class="cm">3              8</span>
<span class="cm">4              16</span>
<span class="cm">5              32</span>
<span class="cm">6              64</span>
<span class="cm">7              128</span>

<span class="cm">To build any number from 0 to 255 from the above 8 bits, just</span>
<span class="cm">select the contributions you need to make. The bits will then be</span>
<span class="cm">1 if you use that contribution, and 0 if you don&#39;t.</span>

<span class="cm">This function will increment the &quot;data&quot; variable from 0 to 255</span>
<span class="cm">and repeat. When we send this value to the shift register and LEDs,</span>
<span class="cm">you can see the on-off pattern of the eight bits that make up the</span>
<span class="cm">byte. See http://www.arduino.cc/playground/Code/BitMath for more</span>
<span class="cm">information on binary numbers.</span>
<span class="cm">*/</span><span class="w"></span>

void<span class="w"> </span>binaryCount<span class="o">()</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="w">  </span>int<span class="w"> </span>delayTime<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span><span class="err">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="o">(</span>milliseconds<span class="o">)</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>pause<span class="w"> </span>between<span class="w"> </span>LEDs<span class="w"></span>
<span class="w">                        </span><span class="o">//</span><span class="w"> </span>make<span class="w"> </span>this<span class="w"> </span>smaller<span class="w"> </span><span class="kr">for</span><span class="w"> </span>faster<span class="w"> </span>switching<span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>Send<span class="w"> </span>the<span class="w"> </span>data<span class="w"> </span>byte<span class="w"> </span><span class="kr">to</span><span class="w"> </span>the<span class="w"> </span>shift<span class="w"> </span><span class="nl">register</span><span class="o">:</span><span class="w"></span>

<span class="w">  </span>shiftOut<span class="o">(</span>datapin<span class="o">,</span><span class="w"> </span>clockpin<span class="o">,</span><span class="w"> </span>MSBFIRST<span class="o">,</span><span class="w"> </span>data<span class="o">)</span><span class="err">;</span><span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>Toggle<span class="w"> </span>the<span class="w"> </span>latch<span class="w"> </span>pin<span class="w"> </span><span class="kr">to</span><span class="w"> </span>make<span class="w"> </span>the<span class="w"> </span>data<span class="w"> </span>appear<span class="w"> </span>at<span class="w"> </span>the<span class="w"> </span><span class="nl">outputs</span><span class="o">:</span><span class="w"></span>

<span class="w">  </span>digitalWrite<span class="o">(</span>latchpin<span class="o">,</span><span class="w"> </span>HIGH<span class="o">)</span><span class="err">;</span><span class="w"></span>
<span class="w">  </span>digitalWrite<span class="o">(</span>latchpin<span class="o">,</span><span class="w"> </span>LOW<span class="o">)</span><span class="err">;</span><span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>Add<span class="w"> </span>one<span class="w"> </span><span class="kr">to</span><span class="w"> </span>data<span class="o">,</span><span class="w"> </span>and<span class="w"> </span>repeat<span class="err">!</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="o">(</span>Because<span class="w"> </span>a<span class="w"> </span>byte<span class="w"> </span>type<span class="w"> </span>can<span class="w"> </span>only<span class="w"> </span>store<span class="w"> </span>numbers<span class="w"> </span>from<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="m">255</span><span class="o">,</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span>we<span class="w"> </span>add<span class="w"> </span>more<span class="w"> </span>than<span class="w"> </span>that<span class="o">,</span><span class="w"> </span>it<span class="w"> </span>will<span class="w"> </span><span class="s">&quot;roll around&quot;</span><span class="w"> </span>back<span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span>and<span class="w"> </span>start<span class="w"> </span>over<span class="o">).</span><span class="w"></span>

<span class="w">  </span>data<span class="o">++</span><span class="err">;</span><span class="w"></span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span>Delay<span class="w"> </span>so<span class="w"> </span>you<span class="w"> </span>can<span class="w"> </span>see<span class="w"> </span>what<span class="s">&#39;s going on:</span>

<span class="w">  </span>delay<span class="o">(</span>delayTime<span class="o">)</span><span class="err">;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</pre></div>


<h3 style="background-color: white; box-sizing: border-box; color: #555555; font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 20px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 20px;">
Code To Note</h3>

<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px;">
<code style="background: rgb(248, 248, 248); border-radius: 3px; border: 1px solid rgb(234, 234, 234); box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;">shiftOut(datapin, clockpin, MSBFIRST, data);</code></div>

<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px;">
You’ll communicate with the shift register (and a lot of other parts) using an interface called SPI, or Serial Peripheral Interface. This interface uses a data line and a separate clock line that work together to move data in or out of the Arduino at high speed. The MSBFIRST parameter specifies the order in which to send the individual bits, in this case we’re sending the Most Significant Bit first.</div>

<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px;">
<code style="background: rgb(248, 248, 248); border-radius: 3px; border: 1px solid rgb(234, 234, 234); box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;">bitWrite(data, desiredPin, desiredState);</code></div>

<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px;">
Bits are the smallest possible piece of memory in a computer; each one can store either a “1” or a “0”. Larger numbers are stored as arrays of bits. Sometimes we want to manipulate these bits directly, for example now when we’re sending eight bits to the shift register and we want to make them 1 or 0 to turn the LEDs on or off. The Arduino has several commands, such as&nbsp;<code style="background: rgb(248, 248, 248); border-radius: 3px; border: 1px solid rgb(234, 234, 234); box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;">bitWrite()</code>, that make this easy to do.</div>

<h3 style="background-color: white; box-sizing: border-box; color: #555555; font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 20px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 20px;">
What You Should See</h3>

<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px;">
You should see the LEDs light up similarly to experiment 4 (but this time, you’re using a shift register). If they aren’t, make sure you have assembled the circuit correctly and verified and uploaded the code to your board. See the troubleshooting section.</div>

<h3 style="background-color: white; box-sizing: border-box; color: #555555; font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 20px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 20px;">
Real World Application</h3>

<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px;">
Similar to experiment 4, a scrolling marquee display delivers a message with multiple LEDs. Essentially the same task the shift register achieves here in experiment 14.</div>

<div class="row" style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-left: -15px; margin-right: -15px;">
<div class="separator" style="clear: both; text-align: center;">
<a href="https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/3/1/0/SIK_RedBoard_exp_14_01.jpg" style="background: 0px 0px; box-sizing: border-box; color: #e0311d; margin-left: 1em; margin-right: 1em; text-decoration: none;"><img src="https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/3/1/0/SIK_RedBoard_exp_14_01.jpg" style="border: 0px; box-sizing: border-box; height: auto; max-width: 100%; vertical-align: middle;" /></a></div>
<div class="col-xs-6 col-md-6" style="box-sizing: border-box; float: left; min-height: 1px; padding-left: 15px; padding-right: 15px; position: relative; width: 390px;">
</div>
</div>

<h3 style="background-color: white; box-sizing: border-box; color: #555555; font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 20px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 20px;">
Troubleshooting</h3>

<h4 style="background-color: white; box-sizing: border-box; color: #555555; font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 10px;">
The Arduino’s power LED goes out</h4>

<div style="background-color: white; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px;">
This happened to us a couple of times, it happens when the chip is inserted backward. If you fix it quickly nothing will break.</div>

<h4 style="background-color: white; box-sizing: border-box; color: #555555; font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 10px;">
Not Quite Working</h4>

<div style="background-color: white; box-sizing: border-box; margin-bottom: 10px;">
<div style="color: #333333; font-family: 'helvetica neue', helvetica, arial, sans-serif; font-size: 14px; line-height: 20px;">
<div style="color: #333333; font-family: 'helvetica neue', helvetica, arial, sans-serif; font-size: 14px; line-height: 20px;">
Sorry to sound like a broken record but it is probably something as simple as a crossed wire.</div>
<div style="color: #333333; font-family: 'helvetica neue', helvetica, arial, sans-serif; font-size: 14px; line-height: 20px;">
<br /></div>
<h3 style="box-sizing: border-box; color: #555555; font-family: montserrat, 'helvetica neue', helvetica, arial, sans-serif; font-size: 20px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 20px;">
Going Further</h3>
<div style="color: #333333; font-family: 'helvetica neue', helvetica, arial, sans-serif; font-size: 14px; line-height: 20px;">
In the sample sketch above the initial light pattern that is demonstrated come from the function&nbsp;oneAfterAnother(). &nbsp;There are other functions, which are commented out, that you can try:</div>
<div>
<div>
<br /></div>
<div>
<ul>
<li><span style="color: #333333; font-family: &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif; font-size: 14px; line-height: 20px;">//oneOnAtATime(); &nbsp; &nbsp; &nbsp; // Scroll down the line</span></li>
<li><span style="color: #333333; font-family: &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif; font-size: 14px; line-height: 20px;">//pingPong(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Like above, but back and forth</span></li>
<li><span style="color: #333333; font-family: &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif; font-size: 14px; line-height: 20px;">//randomLED(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Blink random LEDs</span></li>
<li><span style="color: #333333; font-family: &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif;"><span style="font-size: 14px; line-height: 20px;">&nbsp;</span></span><span style="color: #333333; font-family: &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif; font-size: 14px; line-height: 20px;">//marquee();</span></li>
<li><span style="color: #333333; font-family: &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif; font-size: 14px; line-height: 20px;">&nbsp;//binaryCount(); &nbsp; &nbsp; &nbsp; &nbsp;// Bit patterns from 0 to 255</span></li>
</ul>
</div>
</div>
<div style="color: #333333; font-family: 'helvetica neue', helvetica, arial, sans-serif; font-size: 14px; line-height: 20px;">
To try out one of the other patterns use the "//" to comment out the oneAfterAnother() then remove the "//" in front of the function you want to try. &nbsp;Next be sure to load the sketch to the redboard/arduino.</div>
<div style="color: #333333; font-family: 'helvetica neue', helvetica, arial, sans-serif; font-size: 14px; line-height: 20px;">
<br /></div>
</div>
<div style="color: #333333; font-family: 'helvetica neue', helvetica, arial, sans-serif; font-size: 14px; line-height: 20px;">
What about having the ability to switch the patterns while the board is running? &nbsp;If you have another breadboard you could add buttons to check for user presses then change the pattern based on that. &nbsp;Or &nbsp;you could wire up a <a href="http://www.davidriewe.com/2016/02/matrix-keypad-with-7-segment-display.html">keyboard matrix</a>&nbsp;and assign a different key press to a different pattern. <br />
<br />
We had an extra Adafruit RGB LED Matrix that had an I2C interface and 5 menu buttons. &nbsp;This worked very nicely because it only requires 2 pins from the redboard. &nbsp;However, no matter what method you use to interact with the redboard in this example, you have the following problem: &nbsp;The sketch as written uses delays between updating the led patterns. &nbsp;In fact, the majority of what the sketch does is wait in delays. &nbsp;If you try and add code that checks for key presses in the main loop of the program then you will have times that you need to hold the button or press the key for over half a second in order for the sketch to see it.<br />
<br />
There are are a few ways this can be solved. &nbsp;1 - Have the keyboard / buttons generate an external interrupt to the redboard which cases a keyboard read and stores the key pressed in a buffer to be processed soon as the current led pattern function call is finished. (this would require additional hardware to route the physical interrupt signal). 2 - Set up a timer interrupt that polls the key for a keypressed, if one if found, set a flag and store the keypress for the sketch to process soon as the current led pattern function has finished. <br />
<br />
Note that both 1 and 2 will involve some delay in the response time but will reduce the need of having the user hold the key or button until the redboard has a chance to check it.<br />
<br />
A third way to do this is set up a interrupt that occurs ever millisecond, in the interrupt service routine you will check if the required time has elapsed and if so update the leds with the next pattern. &nbsp;The main program of your loop will be devoted to interacting with the user. &nbsp;Every millisecond the program will take 15 microseconds to decide if it needs to update the led patter on the 74HC595. &nbsp;99% of the time it has nothing to do and returns. &nbsp;When it does need to update the display it will take about 135 microseconds to shift the pattern out. <br />
<br />
This does require rewriting the code. &nbsp;No longer will you have functions you call for each pattern, but will keep a global variable telling the interrupt service routine which pattern is active and will decide how to do that within the interrupt service routine. &nbsp;The advantage to doing this is the updating the display is happening in the background and allowing the main program to be more interactive with the user.<br />
<br />
Here is a video of the project along with the code: <br />
<br /></div>
</div>

<div style="text-align: center;">
<iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/4tIKYcS4_fo" width="560"></iframe></div>

<p><br />
<br />
<br />
<div style="background-color: white; box-sizing: border-box; margin-bottom: 10px;">
<div style="text-align: center;">
<span style="color: #333333; font-family: &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif;"><span style="font-size: 14px; line-height: 20px;"><a href="/pages/experiment-13-using-relays.html">Experiment 13: Using Relays</a>&nbsp;-|-&nbsp;<a href="/pages/experiment-15-using-an-lcd.html">Experiment 15: Using an LCD</a></span></span></div>
</div>
<h3 style="background-color: white; box-sizing: border-box; color: #555555; font-family: montserrat, 'helvetica neue', helvetica, arial, sans-serif; font-size: 20px; font-weight: 400; line-height: 1.1; margin-bottom: 10px; margin-top: 20px; text-align: center;">
<span style="color: #333333; font-family: &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif; font-size: 14px; line-height: 20px;">Adapted from&nbsp;</span><a href="https://learn.sparkfun.com/tutorials/sik-experiment-guide-for-arduino---v32?_ga=1.62774956.1058471170.1443294570" rel="nofollow" style="color: #7d181e; font-family: 'helvetica neue', helvetica, arial, sans-serif; font-size: 14px; line-height: 20px; text-decoration: none;" target="_blank">Sparkfun Inventor Kit Experiential Guide</a></h3>
<br />
<h2 style="background-color: white; color: #666666; font-family: 'trebuchet ms', trebuchet, verdana, sans-serif; font-size: 22px; line-height: 20px; margin: 0px; position: relative; text-align: center;">
<div style="text-align: center;">
<span style="font-size: large;">Want to save some time learning&nbsp;</span><span style="font-size: large;">Arduino?</span></div>
<span style="font-size: large;"><div style="text-align: center;">
Join the thousands of awesome people to sign up for our<br />
<a href="http://freecourse.hackerspacetech.com/" style="color: #888888; text-decoration: none;">FREE Arduino Video Crash Course!</a></div>
</span></h2>
<br /></p>
        </div>
    </section>
        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<div id="aboutme">
        <p>
            <img width="100%" class="img-thumbnail" src="/images/animatedlogocropped.gif"/>
        </p>
    <p>
        <strong>About Hacker Space Tech</strong><br/>
        We a motivated group of hardware hackers who like learning about technology and building cool things.  To learn more about the display above <a href="http://hackerspacetech.com/building-a-16x32-neopixel-display.html">Click Here</a>.  To learn more about the Contributors at Hacker Space Tech <a href="/pages/hacker-stars.html">Click Here</a>
    </p>
</div>
<section class="well well-sm">
<a href="http://freecourse.hackerspacetech.com" rel="nofollow" target="_blank"><img src="/images/sponsors/pea.jpg" class="img-rounded" width="100%"></a>
<!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="//HackerSpaceTech.us13.list-manage.com/subscribe/post?u=a0dcde6f498dc22f6741963db&amp;id=732af8bbfb" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<h2 class="text-centered">Subscribe to HackerSpace Tech</h2>
<div class="indicates-required"><span class="asterisk">*</span> indicates required</div>
<div class="mc-field-group">
	<label for="mce-EMAIL">Email Address  <span class="asterisk">*</span>
</label>
	<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
</div>
<div class="mc-field-group">
	<label for="mce-FNAME">First Name </label>
	<input type="text" value="" name="FNAME" class="" id="mce-FNAME">
</div>
<div class="mc-field-group">
	<label for="mce-LNAME">Last Name </label>
	<input type="text" value="" name="LNAME" class="" id="mce-LNAME">
</div>
<div class="mc-field-group input-group">
    <strong>Email Format </strong>
    <ul><li><input type="radio" value="html" name="EMAILTYPE" id="mce-EMAILTYPE-0"><label for="mce-EMAILTYPE-0">html</label></li>
<li><input type="radio" value="text" name="EMAILTYPE" id="mce-EMAILTYPE-1"><label for="mce-EMAILTYPE-1">text</label></li>
</ul>
</div>
	<div id="mce-responses" class="clear">
		<div class="response" id="mce-error-response" style="display:none"></div>
		<div class="response" id="mce-success-response" style="display:none"></div>
	</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a0dcde6f498dc22f6741963db_732af8bbfb" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>
<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
<!--End mc_embed_signup-->
    
    <ul class="list-group list-group-flush">

            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
                <ul class="list-group" id="recentposts">
                    <li class="list-group-item">
                        <a href="http://www.hackerspacetech.com/creating-a-simple-relay-board-using-eagle.html">
                            Creating A Simple Relay Board Using Eagle
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.hackerspacetech.com/ldr-light-sensor-tutorial.html">
                            LDR light sensor tutorial
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.hackerspacetech.com/attendance-logger.html">
                            Attendance Logger
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.hackerspacetech.com/virtual-color-mixer.html">
                            Virtual Color Mixer
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.hackerspacetech.com/switch-case-2-a-second-switch-case-example-showing-how-to-take-different-actions-based-on-the-characters-received-in-the-serial-port.html">
                            Switch Case 2: A second switch-case example, showing how to take different actions based on the characters received in the serial port
                        </a>
                    </li>
                </ul>
            </li>

        <!-- <br><center><a href="http://freecourse.hackerspacetech.com"><img width="100%" src="/images/sponsors/pea.jpg"></a></center><br> -->
        
        <!--- Start Sign up --->
        
        

            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Follow HackerSpaceTech</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="http://www.twitter.com/hackerspacetech"><i class="fa fa-twitter-square fa-lg"></i> twitter</a></li>
                <li class="list-group-item"><a href="http://www.linkedin.com/in/driewe"><i class="fa fa-linkedin-square fa-lg"></i> linkedin</a></li>
                <li class="list-group-item"><a href="http://www.github.com/driewe"><i class="fa fa-github-square fa-lg"></i> github</a></li>
                <li class="list-group-item"><a href="http://www.facebook.com/HackerSpaceTech"><i class="fa fa-facebook-square fa-lg"></i> facebook</a></li>
                <li class="list-group-item"><a href="https://www.youtube.com/channel/UCxScU-1pFpDndfqXOLqwrUw"><i class="fa fa-youtube-square fa-lg"></i> youtube</a></li>
                <li class="list-group-item"><a href="https://www.quora.com/profile/David-Riewe"><i class="fa fa-quora-square fa-lg"></i> quora</a></li>
              </ul>
            </li>
    <!-- Amazon 3d printer add -->
     <div class="alignleft">
     <script type="text/javascript">
       	amzn_assoc_ad_type = "banner";
	amzn_assoc_marketplace = "amazon";
	amzn_assoc_region = "US";
	amzn_assoc_placement = "assoc_banner_placement_default";
	amzn_assoc_campaigns = "3dprint";
	amzn_assoc_banner_type = "category";
	amzn_assoc_p = "12";
	amzn_assoc_isresponsive = "false";
	amzn_assoc_banner_id = "1ZZ5MX4FZWRHWKE92NR2";
	amzn_assoc_width = "300";
	amzn_assoc_height = "250";
	amzn_assoc_tracking_id = "teammilleniumonl";
	amzn_assoc_linkid = "19cc01de1e780bf6b1b83556c49a5017";
     </script>
     <script src="//z-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&Operation=GetScript&ID=OneJS&WS=1"></script>
    </div>





    <li class="list-group-item"><h4><i class="fa fa-twitter fa-lg"></i><span class="icon-label">Latest HackerSpaceTech Tweets</span></h4></li>
    <div id="twitter_timeline">
        <a class="twitter-timeline" data-width="325" data-height="400" data-dnt="true" data-theme="light" href="https://twitter.com/hackerspacetech">Tweets by hackerspacetech</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
    </div>

     <!--   <center><br><a href="http://goo.gl/XFRMbW"><img width="100%" src="/images/sponsors/sbs.png"></a><br></center> -->

    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://freecourse.hackerspacetech.com" target="_blank">
                Free Arduino Class
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://programmingelectronics.com/hackerspacetech" target="_blank">
                Register For PEA
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://www.meetup.com/hackerspacetech" target="_blank">
                HackerSpaceTech Meetup
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://hackerspacetech.com/16x32-NeoPixel-FadeCandy-Display/" target="_blank">
                Fadecandy 16x32 Project
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://hackerspacetech.com/RemoteControlRobotIR/" target="_blank">
                Infra Red Controlled Robot
            </a>
        </li>
        <li class="list-group-item">
            <a href="https://thelab.ms/" target="_blank">
                TheLab.ms
            </a>
        </li>
        <li class="list-group-item">
            <a href="https://dallasmakerspace.org/" target="_blank">
                Dallas Maker Space
            </a>
        </li>
        <li class="list-group-item">
            <a href="https://www.hackster.io/driewe" target="_blank">
                Hackster.io
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container-fluid">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2016 Hacker Space Tech
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://www.hackerspacetech.com/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://www.hackerspacetech.com/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://www.hackerspacetech.com/theme/js/respond.min.js"></script>

    <script src="http://www.hackerspacetech.com/theme/js/bodypadding.js"></script>
    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'hackerspacetech'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-47432237-2']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>