<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Adding Second Joystick to Joystick Shield for Arduino - HackerSpaceTech</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="./adding-second-joystick-to-joystick-shield-for-arduino.html">

        <meta name="author" content="David Riewe" />
        <meta name="keywords" content="Arduino,Projects" />
        <meta name="description" content="Added a second joystick to the shield and use one for forward/back motion and the other for turning. I find this setup gives better control. Jeff Branson, from Sparkfun, saw my project on facebook and suggested I submit it to Sparkfun to be added to their project section. I ..." />

        <meta property="og:site_name" content="HackerSpaceTech" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Adding Second Joystick to Joystick Shield for Arduino"/>
        <meta property="og:url" content="./adding-second-joystick-to-joystick-shield-for-arduino.html"/>
        <meta property="og:description" content="Added a second joystick to the shield and use one for forward/back motion and the other for turning. I find this setup gives better control. Jeff Branson, from Sparkfun, saw my project on facebook and suggested I submit it to Sparkfun to be added to their project section. I ..."/>
        <meta property="article:published_time" content="2015-12-28" />
            <meta property="article:section" content="Blog" />
            <meta property="article:tag" content="Arduino" />
            <meta property="article:tag" content="Projects" />
            <meta property="article:author" content="David Riewe" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="./theme/css/bootstrap.united.min.css" type="text/css"/>
    <link href="./theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="./theme/css/pygments/solarizeddark.css" rel="stylesheet">
    <link rel="stylesheet" href="./theme/css/style.css" type="text/css"/>

        <link href="./feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="HackerSpaceTech ATOM Feed"/>



        <link href="./feeds/blog.atom.xml" type="application/atom+xml" rel="alternate"
              title="HackerSpaceTech Blog ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="./" class="navbar-brand">
HackerSpaceTech            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="/category/blog.html">Blog</a></li>
                    <li><a href="/pages/meetups.html">Meetups</a></li>
                    <li><a href="/pages/classes.html">Classes</a></li>
                    <li><a href="http://freecourse.hackerspacetech.com">Arduino Crash Course</a></li>
                    <li><a href="/pages/hacker-stars.html">Hacker Stars</a></li>
                    <li><a href="/pages/tutorials.html">Tutorials</a></li>
                    <li><a href="/pages/contact.html">Contact</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<style>
	#banner{
	    background-image:url(".//images/banners/mainbanner3.png");
	}
</style>

<div id="banner">
	<div class="container-fluid">
		<div class="copy">
			<h1>HackerSpaceTech</h1>
		</div>
	</div>
</div><!-- End Banner -->
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="./adding-second-joystick-to-joystick-shield-for-arduino.html"
                       rel="bookmark"
                       title="Permalink to Adding Second Joystick to Joystick Shield for Arduino">
                        Adding Second Joystick to Joystick Shield for Arduino
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2015-12-28T22:40:00-06:00"> Mon 28 December 2015</time>
    </span>


            <span class="label label-default">By</span>
            <a href="./author/david-riewe.html"><i class="fa fa-user"></i> David Riewe</a>



<span class="label label-default">Tags</span>
	<a href="./tag/arduino.html">Arduino</a>
        /
	<a href="./tag/projects.html">Projects</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p><img alt="Joy Stick" src="/images/joystick.jpg" /></p>
<p>Added a second joystick to the shield and use one for forward/back motion and the other for turning.  I find this setup gives better control.</p>
<p>Jeff Branson, from Sparkfun, saw my project on facebook and suggested I submit it to Sparkfun to be added to their project section.  I said I would if I could get some better quality joysticks, like the ones Sparkfun sells :-). I should be receiving those this week and will build up a nicer version and also add some additonal control buttons.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/nJLt0zrsFyk" frameborder="0" allowfullscreen></iframe>

<p>Below is a video of me driving the redbot using the dual joystick conroller.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/htI5ImI3H18" frameborder="0" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/IO01oVrnVDw" frameborder="0" allowfullscreen></iframe>

<h2>Code for the redbot</h2>
<div class="highlight"><pre><span></span><span class="cm">/*****************************************************************</span>
<span class="cm">XBee_Remote_Control.ino</span>

<span class="cm">*****************************************************************/</span>
<span class="cp">#include</span> <span class="cpf">&lt;RedBot.h&gt;  // This line &quot;includes&quot; the RedBot library into your sketch.</span><span class="cp"></span>
<span class="c1">// Provides special objects, methods, and functions for the RedBot.</span>
<span class="n">RedBotMotors</span> <span class="n">motors</span><span class="p">;</span> <span class="c1">// Instantiate the motor control object. This only needs</span>

<span class="cp">#include</span> <span class="cpf">&quot;notes.h&quot;  // Individual &quot;notes&quot; have been #defined in the notes.h tab to make</span><span class="cp"></span>
<span class="c1">// playing sounds easier. noteC4, for example, is defined as 262, the</span>
<span class="c1">// frequency for middle C. See the tab above?</span>

<span class="n">RedBotSoftwareSerial</span> <span class="n">XBee</span><span class="p">;</span>  <span class="c1">// version of SoftwareSerial that will work with Redbot</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">buzzerPin</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">xval</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">yval</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">swval</span><span class="o">=</span><span class="mi">1023</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">leftmotorspeed</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">rightmotorspeed</span><span class="p">;</span>

<span class="kt">float</span> <span class="n">temp</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Initialize XBee Software Serial port. Make sure the baud</span>
    <span class="c1">// rate matches your XBee setting (9600 is default).</span>
    <span class="n">XBee</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">buzzerPin</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span>
<span class="p">{</span>

<span class="c1">//  if (XBee.available())</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">XBee</span><span class="p">.</span><span class="n">available</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="n">xval</span> <span class="o">=</span> <span class="n">XBee</span><span class="p">.</span><span class="n">read</span><span class="p">();</span>
        <span class="n">yval</span> <span class="o">=</span> <span class="n">XBee</span><span class="p">.</span><span class="n">read</span><span class="p">();</span>
        <span class="n">swval</span> <span class="o">=</span> <span class="n">XBee</span><span class="p">.</span><span class="n">read</span><span class="p">();</span>
        <span class="c1">//xval = Serial.read();</span>
        <span class="c1">//yval = Serial.read();</span>
        <span class="c1">//swval = Serial.read();</span>

        <span class="c1">//normalize the values to a 1 byte value</span>

        <span class="n">temp</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">xval</span> <span class="o">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="mi">255</span><span class="p">;</span>
        <span class="n">xval</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">*</span> <span class="mi">1023</span><span class="p">;</span>

        <span class="n">temp</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">yval</span> <span class="o">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="mi">255</span><span class="p">;</span>
        <span class="n">yval</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">*</span> <span class="mi">1023</span><span class="p">;</span>

        <span class="n">temp</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">swval</span> <span class="o">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="mi">255</span><span class="p">;</span>
        <span class="n">swval</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">*</span> <span class="mi">1023</span><span class="p">;</span>

        <span class="n">xval</span> <span class="o">=</span> <span class="n">map</span><span class="p">(</span><span class="n">xval</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1023</span><span class="p">,</span> <span class="o">-</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
        <span class="n">yval</span> <span class="o">=</span> <span class="n">map</span><span class="p">(</span><span class="n">yval</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1023</span><span class="p">,</span> <span class="o">-</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="n">swval</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">XBee</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
    <span class="c1">//  playSmallWorld();</span>
        <span class="n">blowhorn</span><span class="p">();</span>
        <span class="n">XBee</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">xval</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">40</span> <span class="o">&amp;&amp;</span> <span class="n">xval</span> <span class="o">&lt;</span> <span class="mi">40</span><span class="p">)</span>            <span class="c1">// If we are not turning</span>
    <span class="p">{</span>                                       
        <span class="k">if</span> <span class="p">((</span><span class="n">yval</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">40</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">yval</span> <span class="o">&gt;</span> <span class="mi">40</span><span class="p">))</span>    <span class="c1">// set motor speed</span>
        <span class="p">{</span>
            <span class="n">rightmotorspeed</span> <span class="o">=</span> <span class="n">yval</span><span class="p">;</span>
            <span class="n">leftmotorspeed</span> <span class="o">=</span> <span class="o">-</span><span class="n">yval</span><span class="p">;</span> 
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">rightmotorspeed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="n">leftmotorspeed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>     
        <span class="p">}</span>

    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">xval</span><span class="o">&gt;</span><span class="mi">40</span><span class="p">)</span>  <span class="c1">// Turning Left, are we moving while turning left or </span>
    <span class="p">{</span>                   <span class="c1">// spinning</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">yval</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">40</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">yval</span> <span class="o">&gt;</span> <span class="mi">40</span><span class="p">))</span> <span class="c1">// User is moving forward or backwards</span>
        <span class="p">{</span>
            <span class="n">rightmotorspeed</span> <span class="o">=</span> <span class="n">yval</span><span class="p">;</span>     <span class="c1">// drive right motor 100% forward</span>
            <span class="n">leftmotorspeed</span> <span class="o">=</span> <span class="o">-</span><span class="n">yval</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>   <span class="c1">// runt left by slowing left wheel</span>
        <span class="p">}</span>
        <span class="k">else</span>                            <span class="c1">// spin</span>
        <span class="p">{</span>
            <span class="n">rightmotorspeed</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
            <span class="n">leftmotorspeed</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>            <span class="c1">// We are not going straight or turning left, must be right</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">yval</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">40</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">yval</span> <span class="o">&gt;</span> <span class="mi">40</span><span class="p">))</span>    <span class="c1">// user is moving forward or backwards</span>
        <span class="p">{</span>
            <span class="n">leftmotorspeed</span> <span class="o">=</span> <span class="o">-</span><span class="n">yval</span><span class="p">;</span>
            <span class="n">rightmotorspeed</span> <span class="o">=</span> <span class="n">yval</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">rightmotorspeed</span> <span class="o">=</span> <span class="o">-</span><span class="mi">200</span><span class="p">;</span>
            <span class="n">leftmotorspeed</span> <span class="o">=</span> <span class="o">-</span><span class="mi">200</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">motors</span><span class="p">.</span><span class="n">rightMotor</span><span class="p">(</span><span class="n">rightmotorspeed</span><span class="p">);</span>
    <span class="n">motors</span><span class="p">.</span><span class="n">leftMotor</span><span class="p">(</span><span class="n">leftmotorspeed</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">blowhorn</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">tone</span><span class="p">(</span><span class="n">buzzerPin</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>   <span class="c1">// Play a 1kHz tone on the pin number held in</span>
    <span class="c1">//  the variable &quot;buzzerPin&quot;.</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">125</span><span class="p">);</span>   <span class="c1">// Wait for 125ms.</span>
    <span class="n">noTone</span><span class="p">(</span><span class="n">buzzerPin</span><span class="p">);</span>   <span class="c1">// Stop playing the tone.</span>

    <span class="n">tone</span><span class="p">(</span><span class="n">buzzerPin</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span>  <span class="c1">// Play a 2kHz tone on the buzzer pin</span>

    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>   <span class="c1">// delay for 1000 ms (1 second)</span>

    <span class="n">noTone</span><span class="p">(</span><span class="n">buzzerPin</span><span class="p">);</span>       <span class="c1">// Stop playing the tone.</span>

<span class="p">}</span>

<span class="kt">void</span> <span class="nf">playSmallWorld</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// we use a custom function below called playNote([note],[duration])</span>
    <span class="c1">// to play a note and delay a certain # of milliseconds.</span>
    <span class="c1">//</span>
    <span class="c1">// Both notes and durations are #defined in notes.h -- WN = whole note,</span>
    <span class="c1">// HN = half note, QN = quarter note, EN = eighth note, SN = sixteenth note.</span>
    <span class="c1">//</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteG5</span><span class="p">,</span> <span class="n">HN</span> <span class="o">+</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteG5</span><span class="p">,</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteB5</span><span class="p">,</span> <span class="n">HN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteG5</span><span class="p">,</span> <span class="n">HN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteA5</span><span class="p">,</span> <span class="n">HN</span> <span class="o">+</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteA5</span><span class="p">,</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteA5</span><span class="p">,</span> <span class="n">HN</span> <span class="o">+</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">Rest</span><span class="p">,</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteA5</span><span class="p">,</span> <span class="n">HN</span> <span class="o">+</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteA5</span><span class="p">,</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteC6</span><span class="p">,</span> <span class="n">HN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteA5</span><span class="p">,</span> <span class="n">HN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteB5</span><span class="p">,</span> <span class="n">HN</span> <span class="o">+</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteB5</span><span class="p">,</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteB5</span><span class="p">,</span> <span class="n">HN</span> <span class="o">+</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">Rest</span><span class="p">,</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteB5</span><span class="p">,</span> <span class="n">HN</span> <span class="o">+</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteB5</span><span class="p">,</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteD6</span><span class="p">,</span> <span class="n">HN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteB5</span><span class="p">,</span> <span class="n">HN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteC6</span><span class="p">,</span> <span class="n">HN</span> <span class="o">+</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteC6</span><span class="p">,</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteC6</span><span class="p">,</span> <span class="n">HN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteB5</span><span class="p">,</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteA5</span><span class="p">,</span> <span class="n">QN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteD5</span><span class="p">,</span> <span class="n">WN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteFs5</span><span class="p">,</span> <span class="n">WN</span><span class="p">);</span>
    <span class="n">playNote</span><span class="p">(</span><span class="n">noteG5</span><span class="p">,</span> <span class="n">WN</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">playNote</span><span class="p">(</span><span class="kt">int</span> <span class="n">note</span><span class="p">,</span> <span class="kt">int</span> <span class="n">duration</span><span class="p">)</span>
<span class="c1">// This custom function takes two parameters, note and duration to make playing songs easier.</span>
<span class="c1">// Each of the notes have been #defined in the notes.h file. The notes are broken down by</span>
<span class="c1">// octave and sharp (s) / flat (b).</span>
<span class="p">{</span>
    <span class="n">tone</span><span class="p">(</span><span class="n">buzzerPin</span><span class="p">,</span> <span class="n">note</span><span class="p">,</span> <span class="n">duration</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="n">duration</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<h2>Code for the JoyStick Controller</h2>
<div class="highlight"><pre><span></span><span class="cm">/*****************************************************************</span>
<span class="cm">XBee_Remote_Controller.ino</span>

<span class="cm">*****************************************************************/</span>
<span class="c1">// SoftwareSerial is used to communicate with the XBee</span>
<span class="cp">#include</span> <span class="cpf">&lt;SoftwareSerial.h&gt;</span><span class="cp"></span>

<span class="c1">// XBee&#39;s DOUT (TX) is connected to pin 2 (Arduino&#39;s Software RX)</span>
<span class="c1">// XBee&#39;s DIN (RX) is connected to pin 3 (Arduino&#39;s Software TX)</span>
<span class="n">SoftwareSerial</span> <span class="nf">XBee</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span> <span class="c1">// RX, TX</span>

<span class="c1">//values read from joy stick i.e. (0-1023)</span>
<span class="kt">int</span> <span class="n">xval</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">yval</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">swval</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">xval2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">yval2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">swval2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">temp</span><span class="p">;</span>


<span class="k">const</span> <span class="kt">int</span> <span class="n">xpin</span> <span class="o">=</span> <span class="n">A1</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">ypin</span> <span class="o">=</span> <span class="n">A2</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">swpin</span> <span class="o">=</span> <span class="n">A0</span><span class="p">;</span>   <span class="c1">// this is the</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">xpin2</span> <span class="o">=</span> <span class="n">A4</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">ypin2</span> <span class="o">=</span> <span class="n">A5</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">swpin2</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>




<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Initialize XBee Software Serial port. Make sure the baud</span>
    <span class="c1">// rate matches your XBee setting (9600 is default).</span>
    <span class="n">XBee</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

    <span class="c1">// enable pull up on analog pins that are connected to the SEL output</span>
    <span class="c1">// of the joystick</span>
    <span class="c1">//digitalWrite(A0, HIGH);</span>
    <span class="c1">//digitalWrite(A3, HIGH);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">xval</span> <span class="o">=</span> <span class="n">analogRead</span><span class="p">(</span><span class="n">xpin</span><span class="p">);</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">xval</span> <span class="o">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="mi">1023</span><span class="p">;</span>
    <span class="n">xval</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">*</span> <span class="n">temp</span><span class="p">;</span>

    <span class="n">swval</span> <span class="o">=</span> <span class="n">analogRead</span><span class="p">(</span><span class="n">swpin</span><span class="p">);</span>          <span class="c1">// only concered if swval is 0</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">swval</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">swval</span> <span class="o">=</span> <span class="mi">255</span><span class="p">;</span>

    <span class="n">yval2</span> <span class="o">=</span> <span class="n">analogRead</span><span class="p">(</span><span class="n">ypin2</span><span class="p">);</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">yval2</span> <span class="o">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="mi">1023</span><span class="p">;</span>
    <span class="n">yval2</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">*</span> <span class="n">temp</span><span class="p">;</span>

    <span class="n">swval2</span> <span class="o">=</span> <span class="n">analogRead</span><span class="p">(</span><span class="n">swpin2</span><span class="p">);</span>


    <span class="k">if</span> <span class="p">(</span><span class="n">swval2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">swval2</span> <span class="o">=</span> <span class="mi">255</span><span class="p">;</span>


    <span class="n">XBee</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">xval</span><span class="p">);</span>  <span class="c1">// This first code will be interpreted for steering</span>
    <span class="n">XBee</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">yval2</span><span class="p">);</span>  <span class="c1">// motor drive</span>
    <span class="n">XBee</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">swval</span><span class="p">);</span>

    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;swval = &quot;</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">swval</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">swval</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">delay</span><span class="p">(</span><span class="mi">600</span><span class="p">);</span>  <span class="c1">// horn was pressed, give user time to release&#39;</span>

<span class="p">}</span>
</pre></div>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Related Posts:</h4>
    <ul>
        <li><a href="./nootropic-design-16x32-rgb-backpack-from-adafruit.html">Nootropic design 16x32 RGB backpack from Adafruit</a></li>
        <li><a href="./arduino-gps-clock.html">Arduino GPS Clock</a></li>
        <li><a href="./8x16-led-matrix-controlled-by-2-max7219s.html">8x16 LED matrix controlled by 2 MAX7219's</a></li>
        <li><a href="./wireless-arduino-thumb-joystick-shield.html">Wireless Arduino Thumb Joystick Shield</a></li>
        <li><a href="./track-a-car-using-tiny-arduino-gps-with-sd-card.html">Track A Car Using Tiny Arduino GPS with SD Card</a></li>
        <li><a href="./attendance-logger.html">Attendance Logger</a></li>
        <li><a href="./playing-music-with-remote-control.html">Playing Music With Remote Control</a></li>
        <li><a href="./max7219-8x8-red-dot-led-matrix-kit.html">MAX7219 8X8 Red Dot LED Matrix Kit</a></li>
        <li><a href="./creating-a-simple-relay-board-using-eagle.html">Creating A Simple Relay Board Using Eagle</a></li>
        <li><a href="./infra-red-controlled-robot.html">Infra Red Controlled Robot</a></li>
    </ul>
</section>
    <hr />
    <!-- AddThis Button BEGIN -->
    <div class="addthis_toolbox addthis_default_style">
            <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
            <a class="addthis_button_tweet"></a>
            <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    </div>
    <!-- AddThis Button END -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<div id="aboutme">
        <p>
            <img width="100%" class="img-thumbnail" src="/images/animatedlogocropped.gif"/>
        </p>
    <p>
        <strong>About Hacker Space Tech</strong><br/>
        We a motivated group of hardware hackers who like learning about technology and building cool things.  To learn more about the display above <a href="http://hackerspacetech.com/building-a-16x32-neopixel-display.html">Click Here</a>.  To learn more about the Hacker Stars at Hacker Space Tech <a href="/pages/hacker-stars.html">Click Here</a><br><br>
    </p>
</div>
<section class="well well-sm">

    <ul class="list-group list-group-flush">

            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
                <ul class="list-group" id="recentposts">
                    <li class="list-group-item">
                        <a href="./creating-a-simple-relay-board-using-eagle.html">
                            Creating A Simple Relay Board Using Eagle
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="./ldr-light-sensor-tutorial.html">
                            LDR light sensor tutorial
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="./attendance-logger.html">
                            Attendance Logger
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="./virtual-color-mixer.html">
                            Virtual Color Mixer
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="./switch-case-2-a-second-switch-case-example-showing-how-to-take-different-actions-based-on-the-characters-received-in-the-serial-port.html">
                            Switch Case 2: A second switch-case example, showing how to take different actions based on the characters received in the serial port
                        </a>
                    </li>
                </ul>
            </li>

        <br><center><a href="http://freecourse.hackerspacetech.com"><img width="100%" src="/images/sponsors/pea.jpg"></a></center><br>

            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Follow HackerSpaceTech</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="http://www.twitter.com/hackerspacetech"><i class="fa fa-twitter-square fa-lg"></i> twitter</a></li>
                <li class="list-group-item"><a href="http://www.linkedin.com/in/driewe"><i class="fa fa-linkedin-square fa-lg"></i> linkedin</a></li>
                <li class="list-group-item"><a href="http://www.github.com/driewe"><i class="fa fa-github-square fa-lg"></i> github</a></li>
                <li class="list-group-item"><a href="http://www.facebook.com/HackerSpaceTech"><i class="fa fa-facebook-square fa-lg"></i> facebook</a></li>
                <li class="list-group-item"><a href="https://www.youtube.com/channel/UCxScU-1pFpDndfqXOLqwrUw"><i class="fa fa-youtube-square fa-lg"></i> youtube</a></li>
                <li class="list-group-item"><a href="https://www.quora.com/profile/David-Riewe"><i class="fa fa-quora-square fa-lg"></i> quora</a></li>
              </ul>
            </li>
    <!-- Amazon 3d printer add -->
     <div class="alignleft">
     <script type="text/javascript">
       	amzn_assoc_ad_type = "banner";
	amzn_assoc_marketplace = "amazon";
	amzn_assoc_region = "US";
	amzn_assoc_placement = "assoc_banner_placement_default";
	amzn_assoc_campaigns = "3dprint";
	amzn_assoc_banner_type = "category";
	amzn_assoc_p = "12";
	amzn_assoc_isresponsive = "false";
	amzn_assoc_banner_id = "1ZZ5MX4FZWRHWKE92NR2";
	amzn_assoc_width = "300";
	amzn_assoc_height = "250";
	amzn_assoc_tracking_id = "teammilleniumonl";
	amzn_assoc_linkid = "19cc01de1e780bf6b1b83556c49a5017";
     </script>
     <script src="//z-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&Operation=GetScript&ID=OneJS&WS=1"></script>
    </div>





    <li class="list-group-item"><h4><i class="fa fa-twitter fa-lg"></i><span class="icon-label">Latest HackerSpaceTech Tweets</span></h4></li>
    <div id="twitter_timeline">
        <a class="twitter-timeline" data-width="325" data-height="400" data-dnt="true" data-theme="light" href="https://twitter.com/hackerspacetech">Tweets by hackerspacetech</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
    </div>

        <center><br><a href="http://goo.gl/XFRMbW"><img width="100%" src="/images/sponsors/sbs.png"></a><br></center>

    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://freecourse.hackerspacetech.com" target="_blank">
                Free Arduino Class
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://programmingelectronics.com/hackerspacetech" target="_blank">
                Register For PEA
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://www.meetup.com/hackerspacetech" target="_blank">
                HackerSpaceTech Meetup
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://hackerspacetech.com/16x32-NeoPixel-FadeCandy-Display/" target="_blank">
                Fadecandy 16x32 Project
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://hackerspacetech.com/RemoteControlRobotIR/" target="_blank">
                Infra Red Controlled Robot
            </a>
        </li>
        <li class="list-group-item">
            <a href="https://thelab.ms/" target="_blank">
                TheLab.ms
            </a>
        </li>
        <li class="list-group-item">
            <a href="https://dallasmakerspace.org/" target="_blank">
                Dallas Maker Space
            </a>
        </li>
        <li class="list-group-item">
            <a href="https://www.hackster.io/driewe" target="_blank">
                Hackster.io
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container-fluid">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2016 Hacker Space Tech
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="./theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="./theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="./theme/js/respond.min.js"></script>

    <script src="./theme/js/bodypadding.js"></script>
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-47432237-2']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

        <script type="text/javascript">var addthis_config = {"data_track_addressbar": true};</script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=driewe"></script>
</body>
</html>